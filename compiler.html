<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/style.css">
    <title>Jason Schwartzman</title>
    <link rel="icon" href="images/JS.png"/>
</head>

<body>
    <header>
        <div style="position:fixed;z-index:9">
        <nav>
            <div class="button-container">
                <a href="index.html" class="button">Home</a>
                <div class="dropdown">
                    <a href="projects.html" class="curbutton">Projects</a>
                    <div class="dropdown-content">
                        <a href="compiler.html">Compiler</a>
                        <a href="chess.html">Chess</a>
                        <a href="malwareanalysis.html">Malware Analysis</a>
                        <a href="geospoofing.html">Geo-Spoofing Detection</a>
                        <a href="personalwebsite.html">Personal Website</a>
                    </div>
                </div>
                <a href="jlang.html" class="button">JLang</a>
                <a href="about.html" class="button">About</a>
                <a href="contact.html" class="button">Contact</a>
            </div>
        </nav></div><div>
        <nav>
            <div style="margin-top:53px;" class="button-container">
                <a href="compiler.html" class="curbutton">Compiler</a>
                <a href="chess.html" class="button">Chess</a>
                <a href="malwareanalysis.html" class="button">Malware Analysis</a>
                <a href="geospoofing.html" class="button">Geo-Spoofing Detection</a>
                <a href="personalwebsite.html" class="button">Personal Website</a>
            </div>
        </nav></div>
    </header>
    <style>.red {
        color: red;
    }
    
    .blue {
        color: blue;
    }
    .code-container {
        width:fit-content;
        background-color: black;
        padding: 20px;
        border: 2px solid #00ff00; /* Green border */
        border-radius: 5px;
        box-shadow: 0px 0px 10px rgba(0, 255, 0, 0.5); /* Green shadow */
    }
    </style>
    <div style="margin-top: 110px;"class="terminal">
        <h1>Compiler</h1>
        <p>Start Date: December 2022</p>
        <p>Status: In Progress</p>
        <p>I designed my own Programming Language, JLang, which is compiled using the JLang Compiler.</p>
        <p>I have always been interested in how compilers 
            generate computer readable instructions from human readable code 
            and I wanted to learn and experience it myself so I decided to build 
            a compiler for my own Programming Language.</p>
        <h1>JLang Overview</h1>
        <p>JLang is very similar to C in terms of syntax and semantics.</p>
        <div class="code-container"><pre><code><span style="color:blue">int</span> <span style="color:white">x = </span>10<span style="color:white">;</span></code></pre></div>
        <p></p>
        <h1>Development Process</h3>
        <p>This process was broken down into 5 major parts: Scanner, Parser, Semantics, Intermediate Representation, Code Generation. I used this <a href="https://www3.nd.edu/~dthain/compilerbook/" target="_blank">textbook</a> as a guide throughout.</p>

        <div class="code-container"><pre><code><span style="color:blue">int</span> <span style="color:red">square</span>(<span style="color:blue">int</span> <span style="color:white">num</span>) {
    <span style="color:orange">return</span> <span style="color:white">num</span> * <span style="color:white">num</span>;
}</code></pre></div>
<p></p>
        <h2>Scanner</h2>
        <p>This is the first stage of compiling where the source code is read as a stream of characters and 
            grouped into meaningful tokens. Some examples include <span style="color:blue">int</span> (for integers) <span style="color:orange">if</span> (for conditionals) and <span style="color:white">identifiers</span> (for variable and function names) as well as symbols used for syntax. </p>
            <div class="code-container"><pre><code><span style="color:cyan">INPUT:</span>

<span style="color:gray">i n t   s q u a r e     (       i n t     n u m      )        {</span>
<span style="color:white">[ 1 ]      [ 2 ]      [ 3 ]     [ 4 ]     [ 5 ]    [ 6 ]    [ 7 ]</span>
<span style="color:gray">r e t u r n     n u m       *        n u m         ;</span>
   <span style="color:white">[ 8 ]        [ 9 ]     [ 10 ]     [ 11 ]      [ 12 ]</span>
  <span style="color:gray">}</span>
<span style="color:white">[ 13 ]</span>

<span style="color:orange">------------------------------------------------------------------------------------------------------------------------------------------------</span>

<span style="color:red">OUTPUT:</span>

 <span style="color:white">[ 1 ]           [ 2 ]                    [ 3 ]              [ 4 ]           [ 5 ]                 [ 6 ]                      [ 7 ]</span>
<span style="color:gray">TOKEN_INT -> TOKEN_IDENTIFIER -> TOKEN_LEFT_PARENTHESES -> TOKEN_INT -> TOKEN_IDENTIFIER -> TOKEN_RIGHT_PARENTHESE -> TOKEN_LEFT_CURLY_BRACE -></span>
   <span style="color:white">[ 8 ]             [ 9 ]            [ 10 ]           [ 11 ]              [ 12 ]</span>
<span style="color:gray">TOKEN_RETURN -> TOKEN_IDENTIFIER -> TOKEN_MULT -> TOKEN_IDENTIFIER -> TOKEN_SEMICOLON -></span>
      <span style="color:white">[ 13 ]</span>
<span style="color:gray">TOKEN_RIGHT_CURLY_BRACE</span></code></pre></div>
<p></p>        
<h2>Parser</h2>
        <p>This next stage uses the tokens generated from the scanner. It groups the tokens into rules for the language. If tokens are like words, rules are like sentences. 
            If we have the following tokens: int x = 5 ; This forms a variable declaration rule. All rules that are parsed are added a syntax tree which holds the full program.
        </p>
        <div class="code-container"><pre><code><span style="color:cyan">INPUT:</span>

 <span style="color:white">[ 1 ]           [ 2 ]                    [ 3 ]              [ 4 ]           [ 5 ]                 [ 6 ]                      [ 7 ]</span>
<span style="color:gray">TOKEN_INT -> TOKEN_IDENTIFIER -> TOKEN_LEFT_PARENTHESES -> TOKEN_INT -> TOKEN_IDENTIFIER -> TOKEN_RIGHT_PARENTHESE -> TOKEN_LEFT_CURLY_BRACE -></span>
   <span style="color:white">[ 8 ]             [ 9 ]            [ 10 ]           [ 11 ]              [ 12 ]               [ 13 ]</span>
<span style="color:gray">TOKEN_RETURN -> TOKEN_IDENTIFIER -> TOKEN_MULT -> TOKEN_IDENTIFIER -> TOKEN_SEMICOLON -> TOKEN_RIGHT_CURLY_BRACE</span>

<span style="color:orange">------------------------------------------------------------------------------------------------------------------------------------------------</span>

<span style="color:red">OUTPUT:</span>

<span style="color:rgb(214, 22, 214)">TYPE -> int
PARAMETERS -> TYPE identifer
EXPRESSION -> identifier * identifier
STATEMENTS -> return EXPRESSION ;
FUNCTION -> TYPE identifier ( PARAMETERS ) { STATEMENTS }</span>
<span style="color:blue">
                           ________________
                          |                | 
                          |    FUNCTION    |
                          |________________|
                         /      /    |    \        
                        /      /     |     \
                       /      /      |      \
                      /      /       |       \
                   TYPE   square  PARAMETERS  STATEMENTS
                    |              |       |            \ 
                    |              |       |             \
                    |              |       |              \
                   int           TYPE     num         return EXPRESSION
                                   |                            |
                                   |                            |
                                   |                            |
                                  int                       num * num</span></code></pre></div>
        <p></p>
        <h2>Semantics</h2>
        <p>This stage includes 3 major parts: symbol creation, name resolution, and type checking.</p>

        <p>Symbol creation is when an identifier is added to a symbol table which contains all declared variables and functions.</p>

        <p>Name resolution happens after when identifiers are not used in the context of declaration such as assignment (when the variable is already declared) and in expressions.</p>

        <p>Type checking occurs after all symbols and names are resolved and is responsible for determining if all symbols and constants are used without breaking any type rules.</p>
        <div class="code-container"><pre><code><span style="color:cyan">INPUT:</span>
<span style="color:blue">
                ________________
               |                | 
               |    FUNCTION    |
               |________________|
              /      /    |    \        
             /      /     |     \
            /      /      |      \
           /      /       |       \
        TYPE   square  PARAMETERS  STATEMENTS
         |              |       |            \ 
         |              |       |             \
         |              |       |              \
        int           TYPE     num         return EXPRESSION
                        |                            |
                        |                            |
                        |                            |
                       int                       num * num</span>

<span style="color:orange">------------------------------------------------------------</span>

<span style="color:red">OUTPUT:</span>

<span style="color:rgb(12, 243, 219)">Symbol table:
square -- function type: int
num -- variable (param) type: int</span>

<span style="color:rgb(9, 199, 180)">Name resolution:
num (from Expression) -- num (variable)
num (from Expression) -- num (variable)</span>

<span style="color:rgb(15, 229, 229)">Type checking:
return statement:
square (type: int)  ==  [num (type: int)] * [num (type: int)]</span></code></pre></div>
<p></p>        
<h2>Intermediate Representation</h2>
        <p>Once the language is known to be correct in terms of syntax and semantics translating the program into a language between the source code and assembly can begin. At this stage the syntax tree is translated into a "linear" language that consists of instructions similar to assembly. This intermediate language can still hold the types of variables and the symbols they refer to.</p>
        <div class="code-container"><pre><code><span style="color:cyan">INPUT:</span>
<span style="color:blue">                ________________
               |                | 
               |    FUNCTION    |
               |________________|
              /      /    |    \        
             /      /     |     \
            /      /      |      \
           /      /       |       \
        TYPE   square  PARAMETERS  STATEMENTS
         |              |       |            \ 
         |              |       |             \
         |              |       |              \
        int           TYPE     num         return EXPRESSION
                        |                            |
                        |                            |
                        |                            |
                       int                       num * num</span>


<span style="color:rgb(12, 243, 219)">Symbol table:
square -- function type: int
num -- variable (param) type: int</span>

<span style="color:rgb(9, 199, 180)">Name resolution:
num (from Expression) -- num (variable)
num (from Expression) -- num (variable)</span>

<span style="color:rgb(15, 229, 229)">Type checking:
return statement:
square (type: int)  ==  [num (type: int)] * [num (type: int)]</span>

<span style="color:orange">-------------------------------------------------------------</span>

<span style="color:red">OUTPUT:</span>

<span style="color:violet">Operation    Argument 1       Argument 2        Result</span>
<span style="color:gray">FUNC_DECL      square
PARAM            num
MULT             num             num            temp0
RETURN          temp0</span></code></pre></div>
<p></p>        
<h2>Code Generation</h2>
        <p>In the final stage, the intermediate language is converted into assembly. Symbols are converted into addresses that a computer can recognize. The stack is being properly manipulated when functions are being called and local variables are saved.</p>
        <div class="code-container"><pre><code><span style="color:cyan">INPUT:</span>

<span style="color:violet">Operation    Argument 1       Argument 2        Result</span>
<span style="color:gray">FUNC_DECL      square
PARAM            num
MULT             num             num            temp0
RETURN          temp0</span>

<span style="color:orange">-------------------------------------------------------------</span>

<span style="color:red">OUTPUT:</span>

square:
    PUSHQ %rbp
    MOVQ %rsp, %rbp
    MOVQ %rdi, -8(%rbp)
    MOVQ -8(%rbp), %rax
    MOVQ -8(%rbp), %rbx
    IMUL %rax, %rbx
    MOVQ %rbx, %rax
    POPQ %rbp
    RET</code></pre></div>
<h2>Conclusion</h2>
<p>You have now seen the development process for my compiler and compilers in general. 
    If you would like to try out the language for yourself, please check out JLang.</p>
    <div class="code-container"><pre><code>INPUT:

<span style="color:blue">int</span> <span style="color:red">square</span>(<span style="color:blue">int</span> <span style="color:white">num</span>) {
    <span style="color:orange">return</span> <span style="color:white">num</span> * <span style="color:white">num</span>;
}

-----------------------------------------------------
OUTPUT:

square:
PUSHQ %rbp
MOVQ %rsp, %rbp
MOVQ %rdi, -8(%rbp)
MOVQ -8(%rbp), %rax
MOVQ -8(%rbp), %rbx
IMUL %rax, %rbx
MOVQ %rbx, %rax
POPQ %rbp
RET</code></pre></div>
    </div>
</body>
</html>
