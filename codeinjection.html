<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <title>Jason Schwartzman</title>
    <link rel="icon" href="/images/JS.png"/>
</head>

<body>
    <header>
        <div style="position:fixed;z-index:9">
        <nav>
            <div class="button-container">
                <a href="/" class="button">Home</a>
                <div class="dropdown">
                    <a href="/projects" class="curbutton">Projects</a>
                    <div class="dropdown-content">
                        <a href="/projects/compiler">Compiler</a>
                        <a href="/projects/chess">Chess</a>
                        <a href="/projects/malware-analysis">Malware Analysis</a>
                        <a href="/projects/geo-spoofing-detection">Geo-Spoofing Detection</a>
                        <a href="/projects/personal-website">Personal Website</a>
                        <a href="/projects/code-injection">Code Injection</a>
                    </div>
                </div>
                <a href="/jlang" class="button">JLang</a>
                <a href="/skills" class="button">Skills</a>
                <a href="/contact" class="button">Contact</a>
            </div>
        </nav></div><div>
        <nav>
            <div style="margin-top:53px;" class="button-container">
                <a href="/projects/compiler" class="button">Compiler</a>
                <a href="/projects/chess" class="button">Chess</a>
                <a href="/projects/malware-analysis" class="button">Malware Analysis</a>
                <a href="/projects/geo-spoofing-detection" class="button">Geo-Spoofing Detection</a>
                <a href="/projects/personal-website" class="button">Personal Website</a>
                <a href="/projects/code-injection" class="curbutton">Code Injection</a>
            </div>
        </nav></div>
    </header>
    <div style="margin-top: 110px;"class="terminal">
        <h1>Code Injection / Virus</h1>
        <div style="flex-direction:row"><a href="https://github.com/JasonHarrisonSchwartzman/ELF-Code-Injection" class="github-button" target="_blank">
                <i class="fab fa-github icon"></i>GitHub Source Code</a>
                <a href="https://github.com/JasonHarrisonSchwartzman/Chess/archive/refs/heads/master.zip" class="github-button" download>
                    <i class="fas fa-download icon"></i>VM with Virus 
                </a>
            <a href="/projects/code-injection/timestamps" class="button" target="_blank">Timestamps</a>
            </div>
        <p>Start Date: October 2023</p>
        <p>Status: In progress</p>
        <p>In my final semester during my undergrad, this project was one of the possible final projects for my Computer Security course. The objective is to create a virus that infects all executables 
            in the target directory and when those executables are ran the virus's payload runs before the normal program. I attempted to insert code into the main function of the ELF file, however, this would corrupt the ELF file. I chose a different final project to complete in the course due to complexity of this project and deadline constraints and decided to work on the virus project at a later time.</p>
        <p>This virus contains a payload that will send an HTTP POST request to this web server and log the time and date in a database. 
            You can see all timestamps <a href="/projects/code-injections/timestamps">here</a>. You can download the VM with the virus pre-installed here.</p>
        <h2>About</h2>
        <p>This virus will infect all files in the current directly injecting the malicious payload into all executables. The payload contains code that pings this server using an HTTP POST request. The server logs the time and stores it into a database that can be viewed here. Please note that there is no other information being captured or sent to this server. </p>
            <h2>Download</h2>
        <p>You can download and run the virus in the given VM (recommended) or download the virus as is.</p>
        <h2>Usage</h2>
        <p>In the current directory where the virus is installed enter: python3 inject.py in the terminal.</p>
            <h2>Development Process</h2>
            <p>With ELF files, you are unable to simply put the code in the text section of the ELF. This will cause the program to segfault. Other edits are necessary.</p>
            <p>To solve this, I researched the format of ELF files and determined most of the problem was coming from misaligned offets due to the change of size in the file.
            </p>
            <p> 
                There are multiple places one can inject the malicious code. I did some experimentation with injecting code directly into the .text section of code specifically the main function. 
                I was able to determine what offsets and values needed to be changed in order to prevent the file from corrupting.
            </p>
            <h2>Timestamps</h2>

            <p>The timestamps you see include all times the injected code ran successfully in an effected file. This is the only information that can be displayed as the virus does not capture any info. You can run the effected application and then view this page to see a timestamps that should match when you started the program if the code was succesfully ran.</p>
        </div>
</body>
</html>
